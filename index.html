<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-01-18 Tue 18:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Emacs Configuration</title>
<meta name="author" content="Alexey" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">My Emacs Configuration</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org067d15d">1. Global Variables</a></li>
<li><a href="#org592bdca">2. Package System Setup</a></li>
<li><a href="#orgab0f22d">3. Basic Configuration</a>
<ul>
<li><a href="#org4c9dcb7">3.1. Disable Window Defaults</a></li>
<li><a href="#org1b67580">3.2. Default Settings</a></li>
<li><a href="#orgf4539d5">3.3. Mouse Scrolling</a></li>
<li><a href="#org41120c1">3.4. Save and Restore</a></li>
<li><a href="#org27f765a">3.5. Internationalization</a>
<ul>
<li><a href="#orge31e36e">3.5.1. Russian</a></li>
</ul>
</li>
<li><a href="#orgedc8ab9">3.6. File Encryption</a></li>
</ul>
</li>
<li><a href="#orge04f6fd">4. Emacs Improvements</a>
<ul>
<li><a href="#org1ee22c5">4.1. Which Key</a></li>
<li><a href="#org28f747a">4.2. Ivy and Counsel</a></li>
<li><a href="#org2da91b0">4.3. Helpful Help Commands</a></li>
<li><a href="#org7e08c42">4.4. Expand Region</a></li>
<li><a href="#org0932ee0">4.5. Emojify</a></li>
</ul>
</li>
<li><a href="#org79fcdfd">5. UI Configuration</a>
<ul>
<li><a href="#orgb7b684a">5.1. Built-ins</a></li>
<li><a href="#orgb31f36b">5.2. All The Icons</a></li>
<li><a href="#org2808632">5.3. Font Face</a></li>
<li><a href="#orgeb736b5">5.4. Color Theme</a></li>
<li><a href="#org37ecc4a">5.5. Dashboard</a></li>
<li><a href="#orgff3a0f7">5.6. Centaur Tabs</a></li>
<li><a href="#org4d52b50">5.7. Doom Modeline</a></li>
<li><a href="#org982c071">5.8. Treemacs</a></li>
<li><a href="#org816cc56">5.9. Diminish</a></li>
<li><a href="#orgf24591d">5.10. Dimmer</a></li>
</ul>
</li>
<li><a href="#orgcd946af">6. Org Mode</a>
<ul>
<li><a href="#org9706347">6.1. Font Faces</a></li>
<li><a href="#orgc830283">6.2. Basic Configuration</a></li>
<li><a href="#org54b9faf">6.3. Org Mode Improvements</a>
<ul>
<li><a href="#orgf031ee5">6.3.1. Nicer Heading Bullets</a></li>
<li><a href="#org36672a1">6.3.2. Center Org Buffers</a></li>
</ul>
</li>
<li><a href="#orga8572fc">6.4. Babel Languages</a></li>
<li><a href="#org18c4a80">6.5. Structure Templates</a></li>
<li><a href="#org89e5ce6">6.6. Auto-tangle Configuration Files</a></li>
</ul>
</li>
<li><a href="#org859f071">7. Text Modes</a>
<ul>
<li><a href="#orgbc33227">7.1. Variable Pitch Mode</a></li>
<li><a href="#org5312a81">7.2. Darkroom Mode</a></li>
<li><a href="#org116b516">7.3. Typography</a></li>
<li><a href="#orgbadbe24">7.4. Word counting</a></li>
<li><a href="#org0e75d49">7.5. Spell Checking</a></li>
<li><a href="#org3423c65">7.6. Docs</a></li>
</ul>
</li>
<li><a href="#org798ab19">8. Development Modes</a>
<ul>
<li><a href="#orga684a57">8.1. Code editor</a>
<ul>
<li><a href="#orgc426b23">8.1.1. General Settings</a></li>
<li><a href="#org7c6cbe8">8.1.2. Ligatures</a></li>
<li><a href="#org0a64f55">8.1.3. Rainbow Delimiters</a></li>
<li><a href="#org05433d0">8.1.4. Drag Stuff</a></li>
</ul>
</li>
<li><a href="#org6420d9e">8.2. Language Servers</a></li>
<li><a href="#org1de8818">8.3. Code Completion</a></li>
<li><a href="#orgb9ff504">8.4. Programming Languages</a>
<ul>
<li><a href="#org7f1d860">8.4.1. Haskell</a></li>
<li><a href="#org0fcf987">8.4.2. Python</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org324f83b">9. Productivity</a>
<ul>
<li><a href="#org1d84ca8">9.1. Google This</a></li>
<li><a href="#orgdea1d64">9.2. Key Bindings</a></li>
<li><a href="#orgfb6ce4a">9.3. Evil Mode</a></li>
</ul>
</li>
<li><a href="#org158d825">10. Version Control</a>
<ul>
<li><a href="#org0cbc0f7">10.1. Magit</a></li>
</ul>
</li>
<li><a href="#orga9b4b03">11. Miscellaneous</a>
<ul>
<li><a href="#org063005b">11.1. Custom Config File</a></li>
<li><a href="#orgfa4a925">11.2. Miscellaneous Settings</a></li>
<li><a href="#org729e96a">11.3. Recent Files</a></li>
<li><a href="#org8c8daec">11.4. Sudo Edit</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org067d15d" class="outline-2">
<h2 id="org067d15d"><span class="section-number-2">1.</span> Global Variables</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defconst cfg/writing-modes '(org-mode text-mode))
(defconst cfg/default-font-size 160)
(defconst cfg/fill-column 85)
(defconst cfg/fill-dark-columnn 100)

</pre>
</div>
</div>
</div>

<div id="outline-container-org592bdca" class="outline-2">
<h2 id="org592bdca"><span class="section-number-2">2.</span> Package System Setup</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(require 'package)

(setq package-archives '(("melpa-stable"
      . "https://stable.melpa.org/packages/")
	("melpa" . "https://melpa.org/packages/")
	("gnu" . "https://elpa.gnu.org/packages/")
	("org" . "https://orgmode.org/elpa/")))

(package-initialize)
(unless package-archive-contents
  (package-refresh-contents))

 ;; Compatibility for non-Linux platforms
 ;; use-package is not installed by default
(unless (package-installed-p 'use-package)
  (package-install 'use-package))

(require 'use-package)
(setq use-package-always-ensure t)

 ;; Fix $PATH environment variable for X sessions of Emacs
(use-package exec-path-from-shell)
(when (memq window-system '(mac ns x))
  (exec-path-from-shell-initialize))

 ;; fixes some warnings
(use-package gnu-elpa-keyring-update)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgab0f22d" class="outline-2">
<h2 id="orgab0f22d"><span class="section-number-2">3.</span> Basic Configuration</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org4c9dcb7" class="outline-3">
<h3 id="org4c9dcb7"><span class="section-number-3">3.1.</span> Disable Window Defaults</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (setq inhibit-startup-message t)
  ;; disable default window elements
  (menu-bar-mode -1)
(when (window-system)
    (tool-bar-mode -1)
    (blink-cursor-mode -1)
    (tooltip-mode -1)
    (scroll-bar-mode -1))

</pre>
</div>
</div>
</div>

<div id="outline-container-org1b67580" class="outline-3">
<h3 id="org1b67580"><span class="section-number-3">3.2.</span> Default Settings</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Change default variables.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(setq
  split-width-threshold 1              ; horizontal split only
  help-window-select t
  display-time-format "%H:%M"
  column-number-mode t		   ; display column n in modeline
  visible-bell t			   ; no beep
  ring-bell-function 'ignore
  fill-column cfg/fill-column
  kill-whole-line t	                   ; kill with line with \n
  indent-tabs-mode nil		   ; no tab characters allowed
  initial-scratch-message nil	   ; empty scratch
  sentence-end-double-space nil	   ; single space after coma
  ;; stop asking whether to save newly added abbrev when quitting emacs
  save-abbrevs 'silently
  ;; turn on abbrev mode globally
  abbrev-mode t
  completion-on-separator-character t) ; fill column width

  (show-paren-mode t)                  ; show matching parens
  (electric-pair-mode)                 ; parentheses autocomplete
  (delete-selection-mode t)            ; kill text on pasting
  (global-subword-mode 1)              ; Iterate through CamelCase words
  (display-time-mode 1)                ; show time in modeline
  (defalias 'yes-or-no-p 'y-or-n-p)    ; y / n prompt

</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(if (eq system-type 'darwin)
 (setq mac-command-modifier 'control))
</pre>
</div>
</div>
</div>


<div id="outline-container-orgf4539d5" class="outline-3">
<h3 id="orgf4539d5"><span class="section-number-3">3.3.</span> Mouse Scrolling</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
;; scroll one line at a time (less "jumpy" than defaults)
(setq mouse-wheel-scroll-amount '(2 ((shift) . 2)))
(setq mouse-wheel-progressive-speed nil) ;; don't accelerate scrolling
(setq mouse-wheel-follow-mouse 't)       ;; scroll window under mouse
(setq scroll-step 2)                     ;; keyboard scroll one line at a time

</pre>
</div>
</div>
</div>

<div id="outline-container-org41120c1" class="outline-3">
<h3 id="org41120c1"><span class="section-number-3">3.4.</span> Save and Restore</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Delete trailing white-space and add a final new line.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(add-hook 'before-save-hook #'delete-trailing-whitespace)
(setq require-final-newline t)

</pre>
</div>

<p>
Save and restore Emacs status, including buffers, modes, point and windows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package desktop
  :demand t
  :config
  (desktop-save-mode 0)
  (add-to-list 'desktop-globals-to-save 'golden-ratio-adjust-factor))

</pre>
</div>
</div>
</div>

<div id="outline-container-org27f765a" class="outline-3">
<h3 id="org27f765a"><span class="section-number-3">3.5.</span> Internationalization</h3>
<div class="outline-text-3" id="text-3-5">
</div>
<div id="outline-container-orge31e36e" class="outline-4">
<h4 id="orge31e36e"><span class="section-number-4">3.5.1.</span> Russian</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
Be careful with these settings on different systems. This code was originally written for Linux environment. For now I commented it out after switching to MacOS.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
;;(set-language-environment 'UTF-8)
(set-terminal-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)
;;(setq x-select-request-type '(UTF8_STRING COMPOUND_TEXT TEXT STRING))
;; (prefer-coding-system 'utf-8-mac)
;;(setq default-input-method 'russian-computer)

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgedc8ab9" class="outline-3">
<h3 id="orgedc8ab9"><span class="section-number-3">3.6.</span> File Encryption</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(require 'epa-file)

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge04f6fd" class="outline-2">
<h2 id="orge04f6fd"><span class="section-number-2">4.</span> Emacs Improvements</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1ee22c5" class="outline-3">
<h3 id="org1ee22c5"><span class="section-number-3">4.1.</span> Which Key</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<a href="https://github.com/justbur/emacs-which-key">which-key</a> is a useful UI panel that appears when you start pressing any key binding in Emacs to offer you all possible completions for the prefix.  For example, if you press <code>C-c</code> (hold control and press the letter <code>c</code>), a panel will appear at the bottom of the frame displaying all of the bindings under that prefix and which command they run.  This is very useful for learning the possible key bindings in the mode of your current buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package which-key
  :init (which-key-mode)
  :diminish which-key-mode
  :config
  (setq which-key-idle-delay 1))

</pre>
</div>
</div>
</div>

<div id="outline-container-org28f747a" class="outline-3">
<h3 id="org28f747a"><span class="section-number-3">4.2.</span> Ivy and Counsel</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<a href="https://oremacs.com/swiper/">Ivy</a> is an excellent completion framework for Emacs. It provides a minimal yet powerful selection menu that appears when you open files, switch buffers, and for many other tasks in Emacs. Counsel is a customized set of commands to replace `find-file` with `counsel-find-file`, etc which provide useful commands for each of the default completion commands. <a href="https://github.com/Yevgnen/ivy-rich">ivy-rich</a> adds extra columns to a few of the Counsel commands to provide more information about each item.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package ivy
  :diminish
  :bind (("C-s" . swiper)
	 :map ivy-minibuffer-map
	 ("TAB" . ivy-alt-done)
	 ("C-l" . ivy-alt-done)
	 ("C-j" . ivy-next-line)
	 ("C-k" . ivy-previous-line)
	 :map ivy-switch-buffer-map
	 ("C-k" . ivy-previous-line)
	 ("C-l" . ivy-done)
	 ("C-d" . ivy-switch-buffer-kill)
	 :map ivy-reverse-i-search-map
	 ("C-k" . ivy-previous-line)
	 ("C-d" . ivy-reverse-i-search-kill))
  :config
  (ivy-mode 1))

(use-package ivy-rich
  :init
  :diminish
  :config
  (ivy-rich-mode 1))

(use-package counsel
  :diminish
  :bind (("C-M-j" . 'counsel-switch-buffer)
	 :map minibuffer-local-map
	 ("C-r" . 'counsel-minibuffer-history))
  :config
  (counsel-mode 1))

</pre>
</div>

<p>
Ivy/Counsel integration for <code>all-the-icons</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package all-the-icons-ivy
  :init (add-hook 'after-init-hook 'all-the-icons-ivy-setup))

</pre>
</div>
</div>
</div>

<div id="outline-container-org2da91b0" class="outline-3">
<h3 id="org2da91b0"><span class="section-number-3">4.3.</span> Helpful Help Commands</h3>
<div class="outline-text-3" id="text-4-3">
<p>
<a href="https://github.com/Wilfred/helpful">Helpful</a> adds a lot of very helpful (get it?) information to Emacs'
<code>describe-</code> command buffers. For example, if you use <code>describe-function</code>,
you will not only get the documentation about the function, you will
also see the source code of the function and where it gets used in
other places in the Emacs configuration. It is very useful for
figuring out how things work in Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package helpful
  :diminish
  :config
  (setq
    counsel-describe-function-function #'helpful-callable
    counsel-describe-variable-function #'helpful-variable)
  :bind
  ([remap describe-function] . counsel-describe-function)
  ([remap describe-command] . helpful-command)
  ([remap describe-variable] . counsel-describe-variable)
  ([remap describe-key] . helpful-key))

</pre>
</div>
</div>
</div>

<div id="outline-container-org7e08c42" class="outline-3">
<h3 id="org7e08c42"><span class="section-number-3">4.4.</span> Expand Region</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Emacs extension to increase selected region by semantic units. With
the cursor at the c, it starts by marking the entire word abc, then
expand to the contents of the quotes abc def, then to the entire quote
"abc def", then to the contents of the sexp setq alphabet-start "abc
def" and finally to the entire sexp.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package expand-region
  :bind (("C-=" . er/expand-region)))

</pre>
</div>
</div>
</div>

<div id="outline-container-org0932ee0" class="outline-3">
<h3 id="org0932ee0"><span class="section-number-3">4.5.</span> Emojify</h3>
<div class="outline-text-3" id="text-4-5">
<p>
<a href="https://github.com/iqbalansari/emacs-emojify#emojify">Emojify</a> is an Emacs extension to display emojis. It can display github
style emojis like :smile: or plain ASCII ones. It tries to be as
efficient as possible, while also providing a lot of flexibility
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package emojify
  :diminish 'global-emojify-mode
  :bind ("C-c i e" . 'emojify-insert-emoji)
  :hook (after-init . global-emojify-mode))

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org79fcdfd" class="outline-2">
<h2 id="org79fcdfd"><span class="section-number-2">5.</span> UI Configuration</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgb7b684a" class="outline-3">
<h3 id="orgb7b684a"><span class="section-number-3">5.1.</span> Built-ins</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(add-to-list 'default-frame-alist '(fullscreen . maximized)) ; fullsreen
(fringe-mode '(10 . 10))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgb31f36b" class="outline-3">
<h3 id="orgb31f36b"><span class="section-number-3">5.2.</span> All The Icons</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Several packages depend on this
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package all-the-icons)

(use-package all-the-icons-dired
  :diminish
  :config
  :hook
    (dired-mode . (lambda ()
      (interactive)
      (unless (file-remote-p default-directory)
	(all-the-icons-dired-mode)))))

(use-package dired-subtree
  :config
  (advice-add 'dired-subtree-toggle
    :after
      (lambda ()
	(interactive)
	(when all-the-icons-dired-mode
	  (revert-buffer)))))

</pre>
</div>
</div>
</div>

<div id="outline-container-org2808632" class="outline-3">
<h3 id="org2808632"><span class="section-number-3">5.3.</span> Font Face</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(set-face-attribute 'default nil
:font "Fira Code"
:height cfg/default-font-size)

;; Set the fixed pitch face
(set-face-attribute 'fixed-pitch nil
:font "Fira Code"
:height cfg/default-font-size)

;; Set the variable pitch face
(set-face-attribute 'variable-pitch nil
:font "Avenir"
:height cfg/default-font-size
:weight 'regular)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb736b5" class="outline-3">
<h3 id="orgeb736b5"><span class="section-number-3">5.4.</span> Color Theme</h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package doom-themes
  :config
  ;; Global settings (defaults)
  (setq doom-themes-enable-bold t    ; if nil, bold is universally disabled
	doom-themes-enable-italic t       ; if nil, italics is universally disabled
	doom-themes-treemacs-theme "doom-colors")
  (doom-themes-visual-bell-config)   ; Enable flashing mode-line on errors
  (doom-themes-neotree-config)       ; Enable custom neotree theme
  (doom-themes-treemacs-config))
  :init
  (load-theme 'doom-one t)

</pre>
</div>
</div>
</div>

<div id="outline-container-org37ecc4a" class="outline-3">
<h3 id="org37ecc4a"><span class="section-number-3">5.5.</span> Dashboard</h3>
<div class="outline-text-3" id="text-5-5">
<p>
<a href="https://github.com/emacs-dashboard/emacs-dashboard">Emacs Dashboard</a>
An extensible emacs startup screen showing you what’s most important.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package dashboard
  :config
  (dashboard-setup-startup-hook))
(setq
  dashboard-startup-banner 'logo
  dashboard-center-content t
  dashboard-show-shortcuts nil
  dashboard-set-heading-icons t
  dashboard-set-file-icons t)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgff3a0f7" class="outline-3">
<h3 id="orgff3a0f7"><span class="section-number-3">5.6.</span> Centaur Tabs</h3>
<div class="outline-text-3" id="text-5-6">
<p>
<a href="https://github.com/ema2159/centaur-tabs">Centaur-Tabs</a>  aims to become an aesthetic, functional and efficient tabs plugin for Emacs with a lot of customization options.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package centaur-tabs
  :demand
  :config
  (setq
    centaur-tabs-mode t
    centaur-tabs-gray-out-icons 'buffer
    centaur-tabs-style "rounded"
    centaur-tabs-height 36
    centaur-tabs-set-icons t
    centaur-tabs-set-modified-marker t
    centaur-tabs-modified-marker "●"
    ;; centaur-tabs-buffer-groups-function
      ;; #'centaur-tabs-projectile-buffer-groups
      )
  :bind
  (("s-[" . #'centaur-tabs-backward)
   ("s-]" . #'centaur-tabs-forward)))
(centaur-tabs-mode)

</pre>
</div>
</div>
</div>

<div id="outline-container-org4d52b50" class="outline-3">
<h3 id="org4d52b50"><span class="section-number-3">5.7.</span> Doom Modeline</h3>
<div class="outline-text-3" id="text-5-7">
<p>
<a href="https://github.com/seagle0128/doom-modeline">doom-modeline</a> is a very attractive and rich (yet still minimal) mode line configuration for Emacs.  The default configuration is quite good but you can check out the <a href="https://github.com/seagle0128/doom-modeline#customize">configuration options</a> for more things you can enable or disable.
</p>

<p>
<b>NOTE:</b> The first time you load your configuration on a new machine, you'll need to run
 <code>M-x all-the-icons-install-fonts</code>
so that mode line icons display correctly.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package doom-modeline
  :init (doom-modeline-mode 1)
  :config (setq
	    doom-modeline-minor-modes t
	    doom-modeline-height 15))

</pre>
</div>
</div>
</div>

<div id="outline-container-org982c071" class="outline-3">
<h3 id="org982c071"><span class="section-number-3">5.8.</span> Treemacs</h3>
<div class="outline-text-3" id="text-5-8">
<p>
Treemacs is a file and project explorer similar to NeoTree or vim’s NerdTree, but largely inspired by the Project Explorer in Eclipse. It shows the file system outlines of your projects in a simple tree layout allowing quick navigation and exploration, while also possessing basic file management utilities.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package treemacs
  :ensure t
  :defer t
  :init
  (with-eval-after-load 'winum
    (define-key winum-keymap (kbd "M-0") #'treemacs-select-window))
  :config
  (progn
    (setq treemacs-collapse-dirs                   (if treemacs-python-executable 3 0)
	  treemacs-deferred-git-apply-delay        0.5
	  treemacs-directory-name-transformer      #'identity
	  treemacs-display-in-side-window          t
	  treemacs-eldoc-display                   'simple
	  treemacs-file-event-delay                5000
	  treemacs-file-extension-regex            treemacs-last-period-regex-value
	  treemacs-file-follow-delay               0.2
	  treemacs-file-name-transformer           #'identity
	  treemacs-follow-after-init               t
	  treemacs-expand-after-init               t
	  treemacs-find-workspace-method           'find-for-file-or-pick-first
	  treemacs-git-command-pipe                ""
	  treemacs-goto-tag-strategy               'refetch-index
	  treemacs-indentation                     2
	  treemacs-indentation-string              " "
	  treemacs-is-never-other-window           nil
	  treemacs-max-git-entries                 5000
	  treemacs-missing-project-action          'ask
	  treemacs-move-forward-on-expand          nil
	  treemacs-no-png-images                   nil
	  treemacs-no-delete-other-windows         t
	  treemacs-project-follow-cleanup          nil
	  treemacs-persist-file                    (expand-file-name ".cache/treemacs-persist" user-emacs-directory)
	  treemacs-position                        'left
	  treemacs-read-string-input               'from-child-frame
	  treemacs-recenter-distance               0.1
	  treemacs-recenter-after-file-follow      nil
	  treemacs-recenter-after-tag-follow       nil
	  treemacs-recenter-after-project-jump     'always
	  treemacs-recenter-after-project-expand   'on-distance
	  treemacs-litter-directories              '("/node_modules" "/.venv" "/.cask")
	  treemacs-show-cursor                     nil
	  treemacs-show-hidden-files               t
	  treemacs-silent-filewatch                nil
	  treemacs-silent-refresh                  nil
	  treemacs-sorting                         'alphabetic-asc
	  treemacs-select-when-already-in-treemacs 'move-back
	  treemacs-space-between-root-nodes        t
	  treemacs-tag-follow-cleanup              t
	  treemacs-tag-follow-delay                1.5
	  treemacs-text-scale                      nil
	  treemacs-user-mode-line-format           nil
	  treemacs-user-header-line-format         nil
	  treemacs-wide-toggle-width               70
	  treemacs-width                           18
	  treemacs-width-increment                 1
	  treemacs-width-is-initially-locked       nil
	  treemacs-workspace-switch-cleanup        nil)

    ;; The default width and height of the icons is 22 pixels. If you are
    ;; using a Hi-DPI display, uncomment this to double the icon size.
    ;;(treemacs-resize-icons 44)

    (treemacs-follow-mode t)
    (treemacs-filewatch-mode t)
    (treemacs-fringe-indicator-mode 'always)

    (pcase (cons (not (null (executable-find "git")))
		 (not (null treemacs-python-executable)))
      (`(t . t)
       (treemacs-git-mode 'deferred))
      (`(t . _)
       (treemacs-git-mode 'simple)))

    (treemacs-hide-gitignored-files-mode nil))
  :bind
  (:map global-map
	("M-0"       . treemacs-select-window)
	("C-x t 1"   . treemacs-delete-other-windows)
	("C-x t t"   . treemacs)
	("C-x t d"   . treemacs-select-directory)
	("C-x t B"   . treemacs-bookmark)
	("C-x t C-t" . treemacs-find-file)
	("C-x t M-t" . treemacs-find-tag)))

(use-package treemacs-evil
  :after (treemacs evil)
  :ensure t)

(use-package treemacs-projectile
  :after (treemacs projectile)
  :ensure t)

(use-package treemacs-icons-dired
  :hook (dired-mode . treemacs-icons-dired-enable-once)
  :ensure t)

(use-package treemacs-magit
  :after (treemacs magit)
  :ensure t)

(use-package treemacs-persp ;;treemacs-perspective if you use perspective.el vs. persp-mode
  :after (treemacs persp-mode) ;;or perspective vs. persp-mode
  :ensure t
  :config (treemacs-set-scope-type 'Perspectives))
</pre>
</div>
</div>
</div>
<div id="outline-container-org816cc56" class="outline-3">
<h3 id="org816cc56"><span class="section-number-3">5.9.</span> Diminish</h3>
<div class="outline-text-3" id="text-5-9">
<p>
The <a href="https://github.com/emacsmirror/diminish">diminish</a> package implements hiding or abbreviation of the mode line displays
(lighters) of minor-modes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">;; diminish built-in minor modes diminish for installed packages is
;; done in each package config
(use-package diminish
  :diminish visual-line-mode
  :diminish org-indent-mode
  :diminish abbrev-mode
  :diminish subword-mode
  :diminish ispell-mode
  :diminish buffer-face-mode
  :diminish outline-minor-mode
  :diminish auto-fill-function)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgf24591d" class="outline-3">
<h3 id="orgf24591d"><span class="section-number-3">5.10.</span> Dimmer</h3>
<div class="outline-text-3" id="text-5-10">
<p>
A slightly more apparent indicator of which buffer is active at the moment.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package dimmer
  :config
    (setq dimmer-fraction 0.2)
    (dimmer-mode))

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcd946af" class="outline-2">
<h2 id="orgcd946af"><span class="section-number-2">6.</span> Org Mode</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org9706347" class="outline-3">
<h3 id="org9706347"><span class="section-number-3">6.1.</span> Font Faces</h3>
<div class="outline-text-3" id="text-6-1">
<p>
The <code>cfg/org-font-setup</code> function configures various text faces to tweak the sizes of headings and use variable width fonts in most cases so that it looks more like we're editing a document in <code>org-mode</code>.  We switch back to fixed width (monospace) fonts for code blocks and tables so that they display correctly.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun cfg/org-font-setup ()
  ;; Replace list hyphen with dot
  (font-lock-add-keywords
    'org-mode '(("melpa-stable^ *\\([-]\\) "
    (0 (prog1 ()
      (compose-region
	(match-beginning 1) (match-end 1) "•"))))))

  ;; Set faces for heading levels
  (dolist (face '((org-level-1 . 1.2)
		  (org-level-2 . 1.1)
		  (org-level-3 . 1.05)
		  (org-level-4 . 1.0)
		  (org-level-5 . 1.1)
		  (org-level-6 . 1.1)
		  (org-level-7 . 1.1)
		  (org-level-8 . 1.1)))
    (set-face-attribute
      (car face) nil
	:font "Avenir" :weight 'regular :height (cdr face)))

  ;; Ensure that anything that should be fixed-pitch in Org files
  ;; appears that way
  (set-face-attribute
    'org-block nil :foreground nil :inherit 'fixed-pitch)
  (set-face-attribute
    'org-code nil   :inherit '(shadow fixed-pitch))
  (set-face-attribute
    'org-table nil   :inherit '(shadow fixed-pitch))
  (set-face-attribute
     'org-verbatim nil :inherit '(shadow fixed-pitch))
  (set-face-attribute
     'org-special-keyword nil :inherit '(font-lock-comment-face fixed-pitch))
  (set-face-attribute
     'org-meta-line nil :inherit '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-checkbox nil :inherit 'fixed-pitch))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgc830283" class="outline-3">
<h3 id="orgc830283"><span class="section-number-3">6.2.</span> Basic Configuration</h3>
<div class="outline-text-3" id="text-6-2">
<p>
This section contains the basic configuration for <code>org-mode</code> plus the configuration for Org agendas and capture templates.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun cfg/org-mode-setup ()
  (org-indent-mode)
  (variable-pitch-mode 1)
  (visual-line-mode 1)
  (diminish 'org-indent-mode)
  (setq
   org-hide-emphasis-markers t
   org-fontify-emphasized-text t
   org-src-fontify-natively t))


(use-package org
  :hook (org-mode . cfg/org-mode-setup)
  :config
  (setq
    org-ellipsis " ▾"
    org-agenda-start-with-log-mode t
    org-log-done 'time
    org-log-into-drawer t)
  (cfg/org-font-setup))

</pre>
</div>
</div>
</div>

<div id="outline-container-org54b9faf" class="outline-3">
<h3 id="org54b9faf"><span class="section-number-3">6.3.</span> Org Mode Improvements</h3>
<div class="outline-text-3" id="text-6-3">
</div>
<div id="outline-container-orgf031ee5" class="outline-4">
<h4 id="orgf031ee5"><span class="section-number-4">6.3.1.</span> Nicer Heading Bullets</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
<a href="https://github.com/sabof/org-bullets">org-bullets</a> replaces the heading stars in <code>org-mode</code> buffers with nicer looking characters that you can control.  Another option for this is <a href="https://github.com/integral-dw/org-superstar-mode">org-superstar-mode</a> which we may cover in a later video.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package org-bullets
  :after org
  :hook (org-mode . org-bullets-mode)
  :config
    (setq org-bullets-bullet-list '("◉" "○" "●" "○" "●" "○" "●")))

</pre>
</div>
</div>
</div>

<div id="outline-container-org36672a1" class="outline-4">
<h4 id="org36672a1"><span class="section-number-4">6.3.2.</span> Center Org Buffers</h4>
<div class="outline-text-4" id="text-6-3-2">
<p>
We use <a href="https://github.com/joostkremers/visual-fill-column">visual-fill-column</a> to center <code>org-mode</code> buffers for a more pleasing writing experience as it centers the contents of the buffer horizontally to seem more like you are editing a document. This is really a matter of personal preference so you can remove the block below if you don't like the behavior.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun cfg/visual-fill ()
  (setq visual-fill-column-width  nil
    visual-fill-column-center-text t)
  (visual-fill-column-mode 1))
(use-package visual-fill-column
  :hook (text-mode . cfg/visual-fill))

;;  interactive adjustments to the text size (e.g., with
;;  text-size-adjust) cannot be detected by visual-fill-column-mode,
;;  therefore if you adjust the text size while
;;  visual-fill-column-mode is active
(advice-add 'text-scale-adjust :after #'visual-fill-column-adjust)

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga8572fc" class="outline-3">
<h3 id="orga8572fc"><span class="section-number-3">6.4.</span> Babel Languages</h3>
<div class="outline-text-3" id="text-6-4">
<p>
To execute or export code in <code>org-mode</code> code blocks, you'll need to set up <code>org-babel-load-languages</code> for each language you'd like to use.
[[<a href="https://orgmode.org/worg/org-contrib/babel/languages.html">https://orgmode.org/worg/org-contrib/babel/languages.html</a>] This page]]: documents all of the languages that you can use with
<code>org-babel</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(org-babel-do-load-languages 'org-babel-load-languages
  '((emacs-lisp . t)
    (python . t)))

(push '("conf-unix" . conf-unix) org-src-lang-modes)

</pre>
</div>
</div>
</div>

<div id="outline-container-org18c4a80" class="outline-3">
<h3 id="org18c4a80"><span class="section-number-3">6.5.</span> Structure Templates</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(require 'org-tempo)
(add-to-list 'org-structure-template-alist '("sh" . "src shell"))
(add-to-list 'org-structure-template-alist '("el" . "src emacs-lisp"))
(add-to-list 'org-structure-template-alist '("py" . "src python"))
(setq org-confirm-babel-evaluate nil)

</pre>
</div>
</div>
</div>

<div id="outline-container-org89e5ce6" class="outline-3">
<h3 id="org89e5ce6"><span class="section-number-3">6.6.</span> Auto-tangle Configuration Files</h3>
<div class="outline-text-3" id="text-6-6">
<p>
This snippet adds a hook to <code>org-mode</code> buffers so that <code>cfg/org-babel-tangle-config</code> gets executed each time such a buffer gets saved.  This function checks to see if the file being saved is the Emacs.org file you're looking at right now, and if so, automatically exports the configuration here to the associated output files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
;; Automatically tangle our Emacs.org config file when we save it
(defun cfg/org-babel-tangle-config ()
  (when (string-equal (buffer-file-name)
		      (expand-file-name "~/.emacs.d/Emacs.org"))
    ;; Dynamic scoping to the rescue
    (let ((org-confirm-babel-evaluate nil))
      (org-babel-tangle))))

(add-hook 'org-mode-hook (lambda () (add-hook 'after-save-hook #'cfg/org-babel-tangle-config)))

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org859f071" class="outline-2">
<h2 id="org859f071"><span class="section-number-2">7.</span> Text Modes</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orgbc33227" class="outline-3">
<h3 id="orgbc33227"><span class="section-number-3">7.1.</span> Variable Pitch Mode</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Use <code>variable-pitch-mode</code> and <code>flyspell-mode</code>.
In addition <code>cfg/visual-fill</code> function is used to center text.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun cfg/text-mode-setup ()
  (variable-pitch-mode 1)
  (flyspell-mode)
  (cfg/visual-fill))
(add-hook 'text-mode-hook 'cfg/text-mode-setup)

</pre>
</div>
</div>
</div>

<div id="outline-container-org5312a81" class="outline-3">
<h3 id="org5312a81"><span class="section-number-3">7.2.</span> Darkroom Mode</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Remove visual distractions and focus on writing.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package darkroom
  :config
  (setq darkroom-text-scale-increase 1))

(defun cfg/darkroom-mode-setup ()
  (auto-fill-mode)
  ;(typopunct-mode)
  ;(centaur-tabs-mode)			;
  (setq fill-column
	(if (bound-and-true-p darkroom-tentative-mode)
	    cfg/fill-dark-columnn cfg/fill-column)))

(add-hook 'darkroom-tentative-mode-hook #'cfg/darkroom-mode-setup)
(global-set-key (kbd "&lt;f6&gt;") 'darkroom-tentative-mode)    ; darkroom mode key

</pre>
</div>
</div>
</div>

<div id="outline-container-org116b516" class="outline-3">
<h3 id="org116b516"><span class="section-number-3">7.3.</span> Typography</h3>
<div class="outline-text-3" id="text-7-3">
<p>
The file has to be manually installed from <a href="https://www.emacswiki.org/emacs/typopunct.el">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package typopunct
  :diminish (typopunct-mode . "[«»]" )
  :load-path "~/.emacs.d/lisp"
  ;; TODO disable typopunct on exiting darkroom-mode
  :hook (darkroom-tentative-mode . typopunct-mode)
  :config (setq-default typopunct-buffer-language 'russian))
(global-set-key (kbd "C-c M-t") 'typopunct-mode)    ; darkroom mode key

</pre>
</div>
</div>
</div>

<div id="outline-container-orgbadbe24" class="outline-3">
<h3 id="orgbadbe24"><span class="section-number-3">7.4.</span> Word counting</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Word counting shows word information in the modeline.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package wc-mode
 :hook (text-mode . wc-mode))

</pre>
</div>
</div>
</div>

<div id="outline-container-org0e75d49" class="outline-3">
<h3 id="org0e75d49"><span class="section-number-3">7.5.</span> Spell Checking</h3>
<div class="outline-text-3" id="text-7-5">
<p>
<a href="http://hunspell.github.io/">Hunspell</a> with the appropriate dictionaries has to be installed system-wide.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package ispell
  ;; Configure `LANG`, otherwise ispell.el cannot find a 'default
  ;; dictionary' even though multiple dictionaries will be configured
  ;; in next line.
  :init
    (setenv "LANG" "en_US.UTF-8")
  :config
    (setq
      ispell-program-name "hunspell"   ;; English and Russian dictionaries.
      ispell-dictionary "en_US,ru_RU"
      ispell-personal-dictionary "~/.hunspell_personal")
      ;; ispell-set-spellchecker-params has to be called
      ;; before ispell-hunspell-add-multi-dic will work
      (ispell-set-spellchecker-params)
      (ispell-hunspell-add-multi-dic "en_US,ru_RU")
      ;; For saving words to the personal dictionary, don't infer it from
      ;; the locale, otherwise it would save to ~/.hunspell_ru_RU.
      ;;(unless (file-exists-p ispell-personal-dictionary)
      ;;  (write-region "" nil ispell-personal-dictionary nil 0))
)

(use-package flyspell
  :diminish (flyspell-mode . " [F7]"))

</pre>
</div>
</div>
</div>

<div id="outline-container-org3423c65" class="outline-3">
<h3 id="org3423c65"><span class="section-number-3">7.6.</span> Docs</h3>
<div class="outline-text-3" id="text-7-6">
<p>
Use variable pitch font in documentation modes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(add-hook 'info-mode-hook 'variable-pitch-mode)
(add-hook 'help-mode-hook 'variable-pitch-mode)
(add-hook 'helpful-mode-hook 'variable-pitch-mode)

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org798ab19" class="outline-2">
<h2 id="org798ab19"><span class="section-number-2">8.</span> Development Modes</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orga684a57" class="outline-3">
<h3 id="orga684a57"><span class="section-number-3">8.1.</span> Code editor</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-orgc426b23" class="outline-4">
<h4 id="orgc426b23"><span class="section-number-4">8.1.1.</span> General Settings</h4>
<div class="outline-text-4" id="text-8-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
;; add line numbers in programming mode
(add-hook 'prog-mode-hook 'linum-mode)

</pre>
</div>
</div>
</div>

<div id="outline-container-org7c6cbe8" class="outline-4">
<h4 id="org7c6cbe8"><span class="section-number-4">8.1.2.</span> Ligatures</h4>
<div class="outline-text-4" id="text-8-1-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package ligature
  :load-path "path-to-ligature-repo"
  :config
  ;; Enable the "www" ligature in every possible major mode
  (ligature-set-ligatures 't '("www"))
  ;; Enable traditional ligature support in eww-mode, if the
  ;; `variable-pitch' face supports it
  (ligature-set-ligatures 'eww-mode '("ff" "fi" "ffi"))
  ;; Enable all Cascadia Code ligatures in programming modes
  (ligature-set-ligatures '(prog-mode interactive-haskell-mode) '("|||&gt;" "&lt;|||" "&lt;==&gt;" "&lt;!--" "####" "~~&gt;" "***" "||=" "||&gt;"
				       ":::" "::=" "=:=" "===" "==&gt;" "=!=" "=&gt;&gt;" "=&lt;&lt;" "=/=" "!=="
				       "!!." "&gt;=&gt;" "&gt;&gt;=" "&gt;&gt;&gt;" "&gt;&gt;-" "&gt;-&gt;" "-&gt;&gt;" "--&gt;" "---" "-&lt;&lt;"
				       "&lt;~~" "&lt;~&gt;" "&lt;*&gt;" "&lt;||" "&lt;|&gt;" "&lt;$&gt;" "&lt;==" "&lt;=&gt;" "&lt;=&lt;" "&lt;-&gt;"
				       "&lt;--" "&lt;-&lt;" "&lt;&lt;=" "&lt;&lt;-" "&lt;&lt;&lt;" "&lt;+&gt;" "&lt;/&gt;" "###" "#_(" "..&lt;"
				       "..." "+++" "/==" "///" "_|_" "www" "&amp;&amp;" "^=" "~~" "~@" "~="
				       "~&gt;" "~-" "**" "*&gt;" "*/" "||" "|}" "|]" "|=" "|&gt;" "|-" "{|"
				       "[|" "]#" "::" ":=" ":&gt;" ":&lt;" "$&gt;" "==" "=&gt;" "!=" "!!" "&gt;:"
				       "&gt;=" "&gt;&gt;" "&gt;-" "-~" "-|" "-&gt;" "--" "-&lt;" "&lt;~" "&lt;*" "&lt;|" "&lt;:"
				       "&lt;$" "&lt;=" "&lt;&gt;" "&lt;-" "&lt;&lt;" "&lt;+" "&lt;/" "#{" "#[" "#:" "#=" "#!"
				       "##" "#(" "#?" "#_" "%%" ".=" ".-" ".." ".?" "+&gt;" "++" "?:"
				       "?=" "?." "??" ";;" "/*" "/=" "/&gt;" "//" "__" "~~" "(*" "*)"
				       "\\\\" "://"))
  ;; Enables ligature checks globally in all buffers. You can also do it
  ;; per mode with `ligature-mode'.
  (global-ligature-mode t))

</pre>
</div>
</div>
</div>

<div id="outline-container-org0a64f55" class="outline-4">
<h4 id="org0a64f55"><span class="section-number-4">8.1.3.</span> Rainbow Delimiters</h4>
<div class="outline-text-4" id="text-8-1-3">
<p>
<a href="https://github.com/Fanael/rainbow-delimiters">rainbow-delimiters</a> is a "rainbow parentheses"-like mode which highlights delimiters such as parentheses, brackets or braces according to their depth. Each successive level is highlighted in a different color. This makes it easy to spot matching delimiters, orient yourself in the code, and tell which statements are at a given depth.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package rainbow-delimiters
  :hook (prog-mode . rainbow-delimiters-mode))

</pre>
</div>
</div>
</div>

<div id="outline-container-org05433d0" class="outline-4">
<h4 id="org05433d0"><span class="section-number-4">8.1.4.</span> Drag Stuff</h4>
<div class="outline-text-4" id="text-8-1-4">
<p>
<a href="https://github.com/rejeep/drag-stuff.el">Drag Stuff</a> is a minor mode for Emacs that makes it possible to drag stuff (words, region, lines) around in Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package drag-stuff
  :diminish
  :hook (prog-mode . drag-stuff-mode)
  :config
    (drag-stuff-define-keys))

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6420d9e" class="outline-3">
<h3 id="org6420d9e"><span class="section-number-3">8.2.</span> Language Servers</h3>
<div class="outline-text-3" id="text-8-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun cfg/lsp-mode-setup ()
  (setq lsp-headerline-breadcrumb-segments
   '(path-up-to-project file symbols))
  (lsp-headerline-breadcrumb-mode))

(use-package lsp-mode
  :commands (lsp lsp-deferred)
  :hook (lsp-mode . cfg/lsp-mode-setup)
  :init
  (setq lsp-keymap-prefix "C-c l")  ;; Or 'C-l', 's-l'
  :config
  (lsp-enable-which-key-integration t)
  (define-key lsp-mode-map (kbd "C-c C-h") 'lsp-describe-thing-at-point))

(use-package lsp-ui
  :hook (lsp-mode . lsp-ui-mode))
(setq
    lsp-ui-sideline-enable nil
    lsp-ui-doc-mode nil
    lsp-ui-doc-show-with-cursor nil
    lsp-ui-doc-show-with-mouse nil
    lsp-lens-enable t
    lsp-ui-doc-position 'top)

 (setq lsp-enable-file-watchers nil)

  (defun markdown-raw-links (&amp;rest ignore)
    "Convert link markup [ANCHOR](URL) to raw URL
     so lsp-ui-doc--make-clickable-link can find it"
    (save-excursion
      (goto-char (point-min))
      (while (re-search-forward markdown-regex-link-inline nil t)
	  (replace-match (replace-regexp-in-string "\n" "" (match-string 6))))))
  (advice-add 'lsp--render-markdown :before #'markdown-raw-links)


 ;; hack to prevent dimmer from interacting with lsp ui frames
;(setq lsp-ui-doc-use-childframe nil)

(use-package lsp-treemacs
  :after lsp)

(use-package lsp-ivy
  :after (ivy lsp-mode))

</pre>
</div>
</div>
</div>

<div id="outline-container-org1de8818" class="outline-3">
<h3 id="org1de8818"><span class="section-number-3">8.3.</span> Code Completion</h3>
<div class="outline-text-3" id="text-8-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package company
  :hook
    ((lsp-mode prog-mode elisp-mode) . company-mode)
  :diminish (company-mode "[CC]")
  :bind (:map company-active-map
	 ("&lt;tab&gt;" . company-complete-selection))
	(:map lsp-mode-map
	 ("&lt;tab&gt;" . company-indent-or-complete-common))
  :config
  (setq
    company-minimum-prefix-length 1
    company-format-magin-function #'company-detect-icons-margin
    company-tooltip-align-annotations t
    company-tooltip-flip-when-above t
    company-show-numbers t
    company-idle-delay 0.2))

;(use-package company-box
 ;:hook (company-mode . company-box-mode))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9ff504" class="outline-3">
<h3 id="orgb9ff504"><span class="section-number-3">8.4.</span> Programming Languages</h3>
<div class="outline-text-3" id="text-8-4">
</div>
<div id="outline-container-org7f1d860" class="outline-4">
<h4 id="org7f1d860"><span class="section-number-4">8.4.1.</span> Haskell</h4>
<div class="outline-text-4" id="text-8-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package lsp-haskell)
(use-package haskell-mode
  :config
  (require 'lsp-haskell)
  (setq haskell-literate-default 'bird)
  (setq haskell-process-suggest-remove-import-lines t)
  (setq haskell-process-auto-import-loaded-modules t)
  (setq haskell-process-log t)
  (setq haskell-process-type 'auto)

  (add-hook 'haskell-mode-hook
	    (lambda ()
	      (setq-local whitespace-style '(face lines trailing tabs)))))

(use-package company-ghci)
(push 'company-ghci company-backends)
(add-hook 'haskell-mode-hook 'company-mode)
;;; To get completions in the REPL
(add-hook 'haskell-interactive-mode-hook 'company-mode)

(add-hook 'haskell-mode-hook #'lsp)
(add-hook 'haskell-literate-mode-hook #'lsp)

(eval-after-load 'haskell-mode '(progn
  (define-key haskell-mode-map (kbd "C-c C-l") 'haskell-process-load-or-reload)
  (define-key haskell-mode-map (kbd "C-c C-z") 'haskell-interactive-switch)
  (define-key haskell-mode-map (kbd "C-c C-n C-t") 'haskell-process-do-type)
  (define-key haskell-mode-map (kbd "C-c C-n C-i") 'haskell-process-do-info)
  (define-key haskell-mode-map (kbd "C-c C-n C-c") 'haskell-process-cabal-build)
  (define-key haskell-mode-map (kbd "C-c C-n c") 'haskell-process-cabal)
  (define-key haskell-mode-map (kbd "C-c C-o") 'haskell-compile)
))

</pre>
</div>
</div>
</div>
<div id="outline-container-org0fcf987" class="outline-4">
<h4 id="org0fcf987"><span class="section-number-4">8.4.2.</span> Python</h4>
<div class="outline-text-4" id="text-8-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq python-shell-interpreter "python3")
(use-package lsp-python-ms
  :ensure t
  :hook (python-mode . (lambda ()
			 (require 'lsp-python-ms)
			 (lsp))))
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org324f83b" class="outline-2">
<h2 id="org324f83b"><span class="section-number-2">9.</span> Productivity</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-org1d84ca8" class="outline-3">
<h3 id="org1d84ca8"><span class="section-number-3">9.1.</span> Google This</h3>
<div class="outline-text-3" id="text-9-1">
<p>
<a href="https://github.com/Malabarba/emacs-google-this">google-this.el</a> is a package that provides a set of functions and keybindings for launching google searches from within emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package google-this)
(global-set-key (kbd "C-c g") google-this-mode-submap)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgdea1d64" class="outline-3">
<h3 id="orgdea1d64"><span class="section-number-3">9.2.</span> Key Bindings</h3>
<div class="outline-text-3" id="text-9-2">
<p>
Open config file
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun open-config-file ()
  "Open my Emacs.org file"
  (interactive)
  (find-file "~/.emacs.d/Emacs.org"))
(global-set-key (kbd "C-c e") #'open-config-file)

</pre>
</div>

<p>
“Modern” keys.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(global-set-key (kbd "&lt;escape&gt;") 'keyboard-escape-quit)
(global-set-key (kbd "C-z") 'undo)

</pre>
</div>


<div class="org-src-container">
<pre class="src src-emacs-lisp">
(global-set-key (kbd "C-c 3") #'split-window-right)
(global-set-key (kbd "C-c /") #'comment-dwim)
(global-set-key "\C-d" "\C-a\C- \C-n\M-w\C-y\C-p") ; duplicate line

;; auto complete
;(global-set-key (kbd "C-&lt;tab&gt;") 'dabbrev-expand)
;(define-key minibuffer-local-map (kbd "C-&lt;tab&gt;") 'dabbrev-expand)

</pre>
</div>

<p>
VS Code has a great feature where you can just copy a filename to the clipboard.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun copy-file-name-to-clipboard ()
  "Copy the current buffer file name to the clipboard."
  (interactive)
  (let ((filename (if (equal major-mode 'dired-mode) default-directory (buffer-file-name))))
    (when filename
      (kill-new filename)
      (message "Copied buffer file name '%s' to the clipboard." filename))))

(global-set-key (kbd "C-c P") #'copy-file-name-to-clipboard)

</pre>
</div>

<p>
It’s useful to have a scratch buffer around, and more useful to have a key chord to switch to it.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(defun switch-to-scratch-buffer ()
  "Switch to the current session's scratch buffer."
  (interactive)
  (switch-to-buffer "*scratch*"))

(global-set-key (kbd "C-c a s") #'switch-to-scratch-buffer)

</pre>
</div>
</div>
</div>
<div id="outline-container-orgfb6ce4a" class="outline-3">
<h3 id="orgfb6ce4a"><span class="section-number-3">9.3.</span> Evil Mode</h3>
<div class="outline-text-3" id="text-9-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil
  :ensure t
  :init
  (setq evil-want-integration t) ;; This is optional since it's already set to t by default.
  (setq evil-want-keybinding nil)
  :config
  (evil-mode 0))

(use-package evil-collection
  :after evil
  :ensure t
  :config
  (evil-collection-init))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org158d825" class="outline-2">
<h2 id="org158d825"><span class="section-number-2">10.</span> Version Control</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-org0cbc0f7" class="outline-3">
<h3 id="org0cbc0f7"><span class="section-number-3">10.1.</span> Magit</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (use-package magit
    :custom
    (magit-display-buffer-function
     #'magit-display-buffer-same-window-except-diff-v1))

  ;; (use-package evil-magit
  ;;   :after magit

  ;; NOTE: Make sure to configure a GitHub token before using this package!
  ;; - https://magit.vc/manual/forge/Token-Creation.html#Token-Creation
  ;; - https://magit.vc/manual/ghub/Getting-Started.html#Getting-Started
  (use-package forge)

; may bring the perfromance issue
(setq auto-revert-check-vc-info t)

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga9b4b03" class="outline-2">
<h2 id="orga9b4b03"><span class="section-number-2">11.</span> Miscellaneous</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org063005b" class="outline-3">
<h3 id="org063005b"><span class="section-number-3">11.1.</span> Custom Config File</h3>
<div class="outline-text-3" id="text-11-1">
<p>
Custom file is used to avoid <code>customize-set-variables</code> clutter in the
main <code>init.el</code> file
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(setq custom-file "~/.emacs.d/custom.el")
(ignore-errors (load custom-file))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa4a925" class="outline-3">
<h3 id="orgfa4a925"><span class="section-number-3">11.2.</span> Miscellaneous Settings</h3>
<div class="outline-text-3" id="text-11-2">
<p>
End littering file systems with backups and auto saves.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(setq make-backup-files nil auto-save-default nil
 create-lockfiles nil)

</pre>
</div>

<p>
Many of Emacs’s defaults are ill-suited for my purposes, but the first one that needs fixing is the shockingly low garbage-collection threshold, which defaults to a paltry 8kb. Setting it to 100mb seems to strike a nice balance between GC pauses and performance. I also like to turn on the messages associated therewith, since thrashing GC is a good indicator of runaway processes or similar weirdness.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(setq gc-cons-threshold 100000000)

</pre>
</div>
</div>
</div>
<div id="outline-container-org729e96a" class="outline-3">
<h3 id="org729e96a"><span class="section-number-3">11.3.</span> Recent Files</h3>
<div class="outline-text-3" id="text-11-3">
<p>
By default, the list of recent files gets cluttered up with the contents of downloaded packages. It comes with Emacs, so there’s no <code>use-package</code> call required.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(require 'recentf)

(add-to-list 'recentf-exclude "\\elpa")

</pre>
</div>
</div>
</div>

<div id="outline-container-org8c8daec" class="outline-3">
<h3 id="org8c8daec"><span class="section-number-3">11.4.</span> Sudo Edit</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package sudo-edit)

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Alexey</p>
<p class="date">Created: 2022-01-18 Tue 18:16</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
